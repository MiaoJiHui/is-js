<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>is.js : Unit Tests</title>

		<link rel="stylesheet" href="./qunit/qunit/qunit.css" />
		<script src="./qunit/qunit/qunit.js"></script>
		<script src="https://raw.github.com/scottrabin/is-js/master/is.js"></script>

		<script src="https://raw.github.com/scottrabin/is-js/master/test/objects.js"></script>
		<script src="https://raw.github.com/scottrabin/is-js/master/test/map.js"></script>
		<script src="https://raw.github.com/scottrabin/is-js/master/test/inside.js"></script>

		<script>
			// onload, add more objects that need the DOM to be ready
			window.onload = function() {
				TEST_OBJECTS.ELEMENT_BODY = document.body;
				TEST_OBJECTS.ELEMENT_DIV = document.createElement('div');

				document.body.appendChild(TEST_OBJECTS.ELEMENT_DIV);
			};

			/**
			 * Test all items in TEST_OBJECTS, using the given function.
			 * Correctness is determined by `pass`; either it's a function that
			 * takes the current test object name, or an array of valid TEST_OBJECTS
			 * property names.
			 *
			 * @param {function(*): boolean} func The `is.` function to test
			 * @param {(function(string, *): boolean|Array.<string>)} pass A function to test
			 *        for whether or not a given test case should be `true` or `false`, or
			 *        a list of test cases that should pass.
			 */
			function testObjects(type, func, pass) {
				var isCorrectType, testValue;
				for (testValue in TEST_OBJECTS) {
					isCorrectType = (is.fn(pass) ? pass(testValue, TEST_OBJECTS[testValue]) : pass.indexOf(testValue) > -1);

					equal(
						func(TEST_OBJECTS[testValue]),
						isCorrectType,
						testValue + (isCorrectType ? ' is ' : ' is not ') + type
					);
				}
			}

			// iterate over the map and test as appropriate
			for (var func in TEST_MAP) {
				(function(fn) {
					test("is." + fn, function(){
						testObjects(TEST_MAP[fn].name, is[fn], TEST_MAP[fn].pass);
					});
				})(func);
			}

			// test is.inside, which is not as easily tested as the other is.* functions
			test("is.inside", function() {
				for (var testName in is_inside) {
					equal(is_inside[testName].actual, is_inside[testName].expected, testName);
				}
			});

		</script>

	</head>
	<body>
		<div id="qunit"></div>
	</body>
</html>
